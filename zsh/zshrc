## start with tmux
if command -v tmux &> /dev/null && [[ -z $TMUX ]] ; then
  exec tmux new -A
fi

## c charp environment
export DOTNET_CLI_TELEMETRY_OPTOUT=1 # disable telemetry

## rust environment
[ -d "$HOME/.cargo/" ] && export PATH="$HOME/.cargo/bin:$PATH"

## flutter environment
[ -d "$HOME/.flutter/" ] && export PATH="$HOME/.flutter/bin:$PATH"

## Path to your oh-my-zsh installation.
export ZSH="$HOME/.oh-my-zsh"
ZSH_THEME="agnoster"

plugins=(
  git
  docker
  docker-compose
)

source $ZSH/oh-my-zsh.sh

## fzf
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh
export FZF_DEFAULT_COMMAND='rg --files --no-ignore --hidden --follow --glob "!.git/*"'

## use nvim buffer to edit command in shell
export EDITOR=nvim
autoload -U edit-command-line
zle -N edit-command-line
bindkey '\033' edit-command-line # Use ESC to edit the current command line:
export KEYTIMEOUT=1

## zsh history config
export HISTFILE="$HOME/.zsh_history"
export SAVEHIST=10000 # maximum number of commands stored in the history file
export HISTSIZE=$SAVEHIST # number of commands loaded into the memory from the history file
setopt HIST_EXPIRE_DUPS_FIRST
setopt HIST_IGNORE_ALL_DUPS # do not put duplicated command into history list
setopt HIST_SAVE_NO_DUPS # do not save duplicated command
setopt INC_APPEND_HISTORY # append command to history file immediately after execution
setopt NO_EXTENDED_HISTORY # disable timestamp in history
setopt NO_SHARE_HISTORY # disable timestamp in history
setopt HIST_REDUCE_BLANKS # Remove superfluous blanks from each command line being added to the history list.

source $HOME/.shell_functions

## java environment
#export JAVA_HOME=/usr/lib/jvm/default

## pyenv
#if [ -d "$HOME/.pyenv/" ]; then
#  export PATH="$HOME/.pyenv/bin:$PATH"
#  eval "$(pyenv init -)"
#  eval "$(pyenv virtualenv-init -)"
#fi
